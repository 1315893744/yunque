(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bind"],{"09fe":function(t,a,e){},3778:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main"},[e("div",{staticClass:"header",style:{backgroundImage:"url("+t.headerImg+")"}},[e("van-image",{attrs:{round:"",width:"2rem",height:"2rem",src:t.avatar}}),e("switch-button",{staticClass:"switch-button",attrs:{styles:t.styles,options:["绑定老账号","绑定新账号"],active:t.active},on:{clickBtn:t.switchState}})],1),e("div",{staticClass:"body"},[0==t.active?e("div",{staticClass:"form"},[e("field",{attrs:{placeholder:"用户名"},scopedSlots:t._u([{key:"button",fn:function(){return[e("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"yidongduanicon-",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1224455288),model:{value:t.loginData.user,callback:function(a){t.$set(t.loginData,"user",a)},expression:"loginData.user"}}),e("field",{attrs:{type:"password",placeholder:"密码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"mima1",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1274920107),model:{value:t.loginData.password,callback:function(a){t.$set(t.loginData,"password",a)},expression:"loginData.password"}}),e("van-button",{staticClass:"a-btn",attrs:{color:t.btnColor,block:"",round:""},on:{click:t.toLogin}},[t._v("绑定")])],1):t._e(),1==t.active?e("div",{staticClass:"form"},[e("field",{attrs:{placeholder:"新的用户名"},scopedSlots:t._u([{key:"button",fn:function(){return[e("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"yidongduanicon-",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1224455288),model:{value:t.regData.user,callback:function(a){t.$set(t.regData,"user",a)},expression:"regData.user"}}),e("field",{attrs:{placeholder:"用户绑定邮箱"},scopedSlots:t._u([{key:"button",fn:function(){return[e("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"youxiang",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1432709672),model:{value:t.regData.email,callback:function(a){t.$set(t.regData,"email",a)},expression:"regData.email"}}),e("field",{attrs:{type:"password",placeholder:"账号登录密码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"mima",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1879012634),model:{value:t.regData.password,callback:function(a){t.$set(t.regData,"password",a)},expression:"regData.password"}}),e("field",{attrs:{type:"password",placeholder:"确认登录密码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"mima2",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1760310344),model:{value:t.regData.password0,callback:function(a){t.$set(t.regData,"password0",a)},expression:"regData.password0"}}),e("checkbox",{staticClass:"user-allow",attrs:{"checked-color":t.styles.leftColor,"icon-size":"16px"},model:{value:t.isAllow,callback:function(a){t.isAllow=a},expression:"isAllow"}},[e("span",[t._v("阅读并同意")]),e("span",{staticClass:"user-agent",style:{color:t.styles.rightColor},on:{click:function(a){return a.stopPropagation(),t.readUser(a)}}},[t._v("《用户注册协议》")])]),e("van-button",{staticClass:"a-btn",attrs:{color:t.btnColor,block:"",round:""},on:{click:t.toReg}},[t._v("注册并绑定")])],1):t._e()])])},i=[],r=(e("68ef"),e("9d70"),e("3743"),e("09fe"),e("2638")),s=e.n(r),n=e("d282"),c=e("a142"),l=e("ea8e"),d=e("ad06"),h=Object(n["a"])("image"),u=h[0],f=h[1],g=u({props:{src:String,fit:String,alt:String,round:Boolean,width:[Number,String],height:[Number,String],radius:[Number,String],lazyLoad:Boolean,showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},errorIcon:{type:String,default:"warning-o"},loadingIcon:{type:String,default:"photo-o"}},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{style:function(){var t={};return Object(c["b"])(this.width)&&(t.width=Object(l["a"])(this.width)),Object(c["b"])(this.height)&&(t.height=Object(l["a"])(this.height)),Object(c["b"])(this.radius)&&(t.overflow="hidden",t.borderRadius=Object(l["a"])(this.radius)),t}},created:function(){var t=this.$Lazyload;t&&(t.$on("loaded",this.onLazyLoaded),t.$on("error",this.onLazyLoadError))},beforeDestroy:function(){var t=this.$Lazyload;t&&(t.$off("loaded",this.onLazyLoaded),t.$off("error",this.onLazyLoadError))},methods:{onLoad:function(t){this.loading=!1,this.$emit("load",t)},onLazyLoaded:function(t){var a=t.el;a===this.$refs.image&&this.loading&&this.onLoad()},onLazyLoadError:function(t){var a=t.el;a!==this.$refs.image||this.error||this.onError()},onError:function(t){this.error=!0,this.loading=!1,this.$emit("error",t)},onClick:function(t){this.$emit("click",t)},genPlaceholder:function(){var t=this.$createElement;return this.loading&&this.showLoading?t("div",{class:f("loading")},[this.slots("loading")||t(d["a"],{attrs:{name:this.loadingIcon},class:f("loading-icon")})]):this.error&&this.showError?t("div",{class:f("error")},[this.slots("error")||t(d["a"],{attrs:{name:this.errorIcon},class:f("error-icon")})]):void 0},genImage:function(){var t=this.$createElement,a={class:f("img"),attrs:{alt:this.alt},style:{objectFit:this.fit}};if(!this.error)return this.lazyLoad?t("img",s()([{ref:"image",directives:[{name:"lazy",value:this.src}]},a])):t("img",s()([{attrs:{src:this.src},on:{load:this.onLoad,error:this.onError}},a]))}},render:function(){var t=arguments[0];return t("div",{class:f({round:this.round}),style:this.style,on:{click:this.onClick}},[this.genImage(),this.genPlaceholder()])}}),p=(e("66b9"),e("b650")),b=(e("c3a6"),e("be7f"),e("565f")),m=(e("3c32"),e("417e")),w=e("612e"),v=e("c24f"),y=e("90de"),C=e("f3f6");function k(t){var a,e,o,i,r,s;a="",o=t.length,e=0;while(e<o)switch(i=t.charCodeAt(e++),i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=t.charAt(e-1);break;case 12:case 13:r=t.charCodeAt(e++),a+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=t.charCodeAt(e++),s=t.charCodeAt(e++),a+=String.fromCharCode((15&i)<<12|(63&r)<<6|(63&s)<<0);break}return a}var D=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function x(t){var a,e,o,i,r,s,n;s=t.length,r=0,n="";while(r<s){do{a=D[255&t.charCodeAt(r++)]}while(r<s&&-1==a);if(-1==a)break;do{e=D[255&t.charCodeAt(r++)]}while(r<s&&-1==e);if(-1==e)break;n+=String.fromCharCode(a<<2|(48&e)>>4);do{if(o=255&t.charCodeAt(r++),61==o)return n;o=D[o]}while(r<s&&-1==o);if(-1==o)break;n+=String.fromCharCode((15&e)<<4|(60&o)>>2);do{if(i=255&t.charCodeAt(r++),61==i)return n;i=D[i]}while(r<s&&-1==i);if(-1==i)break;n+=String.fromCharCode((3&o)<<6|i)}return n}var j,O=function(t){return k(x(t))},L={components:{SwitchButton:w["a"],Checkbox:m["a"],Field:b["a"],Icon:d["a"],"van-button":p["a"],"van-image":g},props:["token"],data:function(){return{headerImg:"",logoImg:"https://bbs.yimenapp.com/static/image/common/logo.png",active:0,styles:{leftColor:"#ff9700",rightColor:"#ed1c24",blockColor:"#000000"},loginData:{user:"",password:""},regData:{user:"",email:"",password:"",password0:""},isAllow:!1,setting:{},avatar:""}},computed:{btnColor:function(){return"linear-gradient(to right, "+this.styles.leftColor+", "+this.styles.rightColor+")"}},mounted:function(){this.initPage(),this.check()},methods:{initPage:function(){var t=this;Object(v["c"])().then((function(a){if(1==a.data.code){var e=a.data.data;t.setting=e,t.styles.leftColor=e.button_left_color,t.styles.rightColor=e.button_right_color,t.headerImg="./wp-content/plugins/yimen/static/login/img/".concat(e.head_img,".jpg")}else t.tips(a.data.msg,a.data.code)})).catch((function(t){console.log(t)}))},check:function(){var t=this;Object(v["a"])(this.token).then((function(a){if(1!=a.data.code)return Object(C["b"])(a.data.msg,a.data.code),void t.$router.push("/login");t.avatar=a.data.data.avatar,t.regData.user=O(a.data.data.nick)})).catch((function(t){console.log(t)}))},switchState:function(t){t!=this.active&&(this.active=t)},readUser:function(){"agreement_url"in this.setting?window.location.href=this.setting.agreement_url:this.isAllow=!this.isAllow},toLogin:function(){Object(y["b"])(this.loginData)?(j=Object(C["a"])("正在绑定中"),Object(v["f"])("bind",this.token,this.loginData.user,this.loginData.password).then((function(t){setTimeout((function(){if(j.clear(),Object(C["b"])(t.data.msg,t.data.code),1==t.data.code)try{window.location.href=document.referrer}catch(a){window.location.href="/"}}),1e3)})).catch((function(t){}))):Object(C["b"])("账号密码不能为空",0)},toReg:function(){if(this.isAllow)if(Object(y["b"])(this.regData))if(Object(y["a"])(this.regData.email)){if(this.regData.password0!=this.regData.password)return Object(C["b"])("密码不一致",0),this.regData.password="",void(this.regData.password0="");j=Object(C["a"])("正在绑定注册中"),Object(v["f"])("reg",this.token,this.regData.user,this.regData.password,this.regData.email).then((function(t){setTimeout((function(){j.clear(),Object(C["b"])(t.data.msg,t.data.code),1==t.data.code&&(window.location.href="/")}),1e3)})).catch((function(t){}))}else Object(C["b"])("邮箱格式不正确",0);else Object(C["b"])("注册信息不能为空",0);else Object(C["b"])("请阅读注册协议并同意",0)}}},S=L,$=(e("4fcd"),e("2877")),_=Object($["a"])(S,o,i,!1,null,null,null);a["default"]=_.exports},"4fcd":function(t,a,e){"use strict";var o=e("8f66"),i=e.n(o);i.a},"8f66":function(t,a,e){}}]);