(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"7c7f":function(t,e,o){},"7fa3":function(t,e,o){"use strict";var a=o("cb85"),i=o.n(a);i.a},a55b:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main"},[o("div",{staticClass:"header",style:{backgroundImage:"url("+t.headerImg+")"}},[o("div",{staticClass:"logo",style:{backgroundImage:"url("+t.logoImg+")"}}),o("switch-button",{staticClass:"switch-button",attrs:{styles:t.styles,options:["登录","注册"],active:t.active},on:{clickBtn:t.switchState}})],1),o("div",{staticClass:"body"},[0==t.active?o("div",{staticClass:"form"},[o("field",{attrs:{placeholder:"用户名"},scopedSlots:t._u([{key:"button",fn:function(){return[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"yidongduanicon-",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1224455288),model:{value:t.loginData.user,callback:function(e){t.$set(t.loginData,"user",e)},expression:"loginData.user"}}),o("field",{attrs:{type:"password",placeholder:"密码"},scopedSlots:t._u([{key:"button",fn:function(){return[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"mima1",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1274920107),model:{value:t.loginData.password,callback:function(e){t.$set(t.loginData,"password",e)},expression:"loginData.password"}}),o("van-button",{staticClass:"a-btn",attrs:{color:t.btnColor,block:"",round:""},on:{click:t.toLogin}},[t._v("登录")]),t.three.all?o("divider",{staticClass:"three-login",style:{color:"#1989fa",borderColor:t.styles.rightColor,padding:"0 16px"},attrs:{hairline:!0}},[t.three.qq?o("div",{staticClass:"login-btn",on:{click:function(e){return t.threeLogin("qq")}}},[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"web-icon-",color:"#3CA0EC",size:"22px"}})],1):t._e(),t.three.wechat?o("div",{staticClass:"login-btn",on:{click:function(e){return t.threeLogin("wechat")}}},[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"weixin",color:"#8CB922",size:"22px"}})],1):t._e(),t.three.sina?o("div",{staticClass:"login-btn",on:{click:function(e){return t.threeLogin("sina")}}},[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"xinlang",color:"#E14432",size:"22px"}})],1):t._e()]):t._e()],1):t._e(),1==t.active?o("div",{staticClass:"form"},[o("field",{attrs:{placeholder:"新的用户名"},scopedSlots:t._u([{key:"button",fn:function(){return[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"yidongduanicon-",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1224455288),model:{value:t.regData.user,callback:function(e){t.$set(t.regData,"user",e)},expression:"regData.user"}}),o("field",{attrs:{placeholder:"用户绑定邮箱"},scopedSlots:t._u([{key:"button",fn:function(){return[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"youxiang",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1432709672),model:{value:t.regData.email,callback:function(e){t.$set(t.regData,"email",e)},expression:"regData.email"}}),o("field",{attrs:{type:"password",placeholder:"账号登录密码"},scopedSlots:t._u([{key:"button",fn:function(){return[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"mima",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1879012634),model:{value:t.regData.password,callback:function(e){t.$set(t.regData,"password",e)},expression:"regData.password"}}),o("field",{attrs:{type:"password",placeholder:"确认登录密码"},scopedSlots:t._u([{key:"button",fn:function(){return[o("icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:"mima2",color:"#999999",size:"18px"}})]},proxy:!0}],null,!1,1760310344),model:{value:t.regData.password0,callback:function(e){t.$set(t.regData,"password0",e)},expression:"regData.password0"}}),o("checkbox",{staticClass:"user-allow",attrs:{"checked-color":t.styles.leftColor,"icon-size":"16px"},model:{value:t.isAllow,callback:function(e){t.isAllow=e},expression:"isAllow"}},[o("span",[t._v("阅读并同意")]),o("span",{staticClass:"user-agent",style:{color:t.styles.rightColor},on:{click:function(e){return e.stopPropagation(),t.readUser(e)}}},[t._v("《用户注册协议》")])]),o("van-button",{staticClass:"a-btn",attrs:{color:t.btnColor,block:"",round:""},on:{click:t.toReg}},[t._v("注册")])],1):t._e()])])},i=[],n=(o("66b9"),o("b650")),s=(o("68ef"),o("7c7f"),o("2638")),c=o.n(s),r=o("d282"),l=o("ba31"),d=Object(r["a"])("divider"),u=d[0],f=d[1];function g(t,e,o,a){var i;return t("div",c()([{attrs:{role:"separator"},style:{borderColor:e.borderColor},class:f((i={dashed:e.dashed,hairline:e.hairline},i["content-"+e.contentPosition]=o.default,i))},Object(l["b"])(a,!0)]),[o.default&&o.default()])}g.props={dashed:Boolean,hairline:{type:Boolean,default:!0},contentPosition:{type:String,default:"center"}};var h,p=u(g),b=(o("c3a6"),o("ad06")),w=(o("be7f"),o("565f")),m=(o("3c32"),o("417e")),v=o("612e"),C=o("c24f"),k=o("90de"),x=o("f3f6"),y={components:{SwitchButton:v["a"],Checkbox:m["a"],Field:w["a"],Icon:b["a"],Divider:p,"van-button":n["a"]},data:function(){return{headerImg:"",logoImg:"/static/image/common/logo.png",active:0,styles:{leftColor:"#ff9700",rightColor:"#ed1c24",blockColor:"#000000"},loginData:{user:"",password:""},regData:{user:"",email:"",password:"",password0:""},isAllow:!1,setting:{},three:{all:0,qq:0,wechat:0,sina:0}}},computed:{btnColor:function(){return"linear-gradient(to right, "+this.styles.leftColor+", "+this.styles.rightColor+")"}},mounted:function(){this.initPage()},methods:{initPage:function(){var t=this;Object(C["c"])().then((function(e){if(1==e.data.code){var o=e.data.data;if(t.setting=o,t.styles.leftColor=o.button_left_color,t.styles.rightColor=o.button_right_color,t.headerImg="/wp-content/plugins/yimen/static/login/img/".concat(o.head_img,".jpg"),Object(k["c"])())return t.isApp?void t.setThreeLogin(o.app_qq,o.app_wx,o.app_wb):Object(k["d"])()?void t.setThreeLogin(0,o.gzh_wx,0):void t.setThreeLogin(o.h5_qq,0,o.h5_wb);try{window.location.href=document.referrer}catch(a){window.location.href="/"}}else t.tips(e.data.msg,e.data.code)})).catch((function(t){console.log(t)}))},switchState:function(t){t!=this.active&&(this.active=t)},readUser:function(){"agreement_url"in this.setting?window.location.href=this.setting.agreement_url:this.isAllow=!this.isAllow},toLogin:function(){Object(k["b"])(this.loginData)?(h=Object(x["a"])("正在登录中"),Object(C["d"])(this.loginData.user,this.loginData.password).then((function(t){setTimeout((function(){if(h.clear(),Object(x["b"])(t.data.msg,t.data.code),1==t.data.code)try{window.location.href=document.referrer}catch(e){window.location.href="/"}}),1e3)})).catch((function(t){console.log(t)}))):Object(x["b"])("账号密码不能为空",0)},toReg:function(){var t=this;if(this.isAllow)if(Object(k["b"])(this.regData))if(Object(k["a"])(this.regData.email)){if(this.regData.password0!=this.regData.password)return Object(x["b"])("密码不一致",0),this.regData.password="",void(this.regData.password0="");h=Object(x["a"])("正在注册中"),Object(C["e"])(this.regData.user,this.regData.email,this.regData.password).then((function(e){setTimeout((function(){h.clear(),Object(x["b"])(e.data.msg,e.data.code),1==e.data.code&&(t.active=0,t.loginData={user:t.regData.user,password:t.regData.password},setTimeout((function(){t.toLogin()}),500))}),1e3)})).catch((function(t){console.log(t)}))}else Object(x["b"])("邮箱格式不正确",0);else Object(x["b"])("注册信息不能为空",0);else Object(x["b"])("请阅读注册协议并同意",0)},threeLogin:function(t){var e=this;if(h=Object(x["a"])("正在登录中"),this.isApp)switch(t){case"qq":this.jsBridge.qqLogin((function(t,o){t?(void 0==o.unionid&&(o.unionid=""),e.toThree("qq",{nickname:o.userinfo.nickname,openid:o.openid,figureurl:escape(o.userinfo.figureurl_qq_2),unionid:o.unionid,at:o.access_token})):Object(x["b"])("取消登录或登录失败",0)}));break;case"wechat":this.jsBridge.wxLogin((function(t,o){if(t){var a={};void 0!=o.userinfo&&(a={nickname:o.userinfo.nickname,openid:o.openid,headimgurl:escape(o.userinfo.headimgurl),unionid:o.unionid}),a.code=o.code,e.toThree("wechat",a)}else Object(x["b"])("取消登录或登录失败",0)}));break;case"sina":this.jsBridge.weibo.login((function(t,e){t?this.toThree("sina",{token:e.token,uid:e.uid}):Object(x["b"])("取消登录或登录失败",0)}));break}else Object(C["b"])(t).then((function(t){Object(x["b"])(t.data.msg,t.data.code),1==t.data.code&&(window.location.href=t.data.url)}))},toThree:function(t,e){var o=this;Object(C["g"])(t,e).then((function(t){h.clear(),Object(x["b"])(t.data.msg),1==t.data.code?o.jsBridge.backToHome(!0):2==t.data.code&&o.$router.push("/bind/"+t.data.data.token)})).catch((function(t){}))},setThreeLogin:function(t,e,o){this.three={all:1==t||1==e||1==o,qq:t,wechat:e,sina:o}}}},D=y,_=(o("7fa3"),o("2877")),j=Object(_["a"])(D,a,i,!1,null,null,null);e["default"]=j.exports},cb85:function(t,e,o){}}]);